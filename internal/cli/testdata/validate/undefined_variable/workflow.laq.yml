version: "1.0"
metadata:
  name: undefined-variable-test
  description: Test workflow with undefined variable references

agents:
  assistant:
    provider: anthropic
    model: claude-3-sonnet-20240229

inputs:
  topic:
    type: string
    description: Topic to analyze

workflow:
  steps:
    - id: analyze
      agent: assistant
      prompt: "Analyze {{ inputs.topic }} using data from {{ steps.nonexistent_step.output }}"
      
    - id: summarize
      agent: assistant
      prompt: "Summarize using {{ undefined_variable }} and {{ state.missing_state }}"
      condition: "{{ steps.analyze.undefined_output }} == 'success'"