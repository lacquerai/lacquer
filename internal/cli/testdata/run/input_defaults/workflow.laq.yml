version: "1.0"
metadata:
  name: input-defaults
  description: Test workflow for input parameters with defaults and validation
  author: lacquer-team

inputs:
  # Required input without default
  required_name:
    type: string
    description: Required name parameter
    required: true
  
  # Optional input with default
  greeting_style:
    type: string
    description: Style of greeting to use
    default: "friendly"
    enum: ["formal", "friendly", "casual"]
  
  # Numeric input with default and constraints
  repetitions:
    type: integer
    description: Number of times to repeat the greeting
    default: 3
    minimum: 1
    maximum: 10
  
  # Boolean input with default
  include_timestamp:
    type: boolean
    description: Whether to include timestamp in output
    default: true
  
  # Array input with default
  additional_messages:
    type: array
    description: Additional messages to include
    default: ["Have a great day!", "Thank you for using Lacquer!"]
    min_items: 1
    max_items: 5
  
  # Object input with default
  formatting_options:
    type: object
    description: Formatting options for output
    default:
      uppercase: false
      add_borders: true
      indent_level: 2
  
  # String input with pattern and default
  user_code:
    type: string
    description: User code in format ABC-123
    default: "LAQ-001"
    pattern: "^[A-Z]{3}-[0-9]{3}$"
  
  # Optional input without default (should be null/undefined)
  optional_note:
    type: string
    description: Optional note to include
    required: false

workflow:
  steps:
    - id: validate_inputs
      run: |
        echo "Required name: ${{ inputs.required_name }}"
        echo "Greeting style: ${{ inputs.greeting_style }}"
        echo "Repetitions: ${{ inputs.repetitions }}"
        echo "Include timestamp: ${{ inputs.include_timestamp }}"
        echo "Additional messages: ${{ inputs.additional_messages }}"
        echo "Formatting options: ${{ inputs.formatting_options }}"
        echo "User code: ${{ inputs.user_code }}"
        echo "Optional note: ${{ inputs.optional_note }}"

  outputs:
    # Output showing all input values (including defaults)
    all_inputs: {
      "required_name": "${{ inputs.required_name }}",
      "greeting_style": "${{ inputs.greeting_style }}",
      "repetitions": "${{ inputs.repetitions }}",
      "include_timestamp": "${{ inputs.include_timestamp }}",
      "additional_messages": "${{ inputs.additional_messages }}",
      "formatting_options": "${{ inputs.formatting_options }}",
      "user_code": "${{ inputs.user_code }}",
      "optional_note": "${{ inputs.optional_note }}"
    }