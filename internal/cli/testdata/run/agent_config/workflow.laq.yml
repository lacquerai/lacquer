version: "1.0"
metadata:
  name: agent-config
  description: Test workflow for various agent configurations and parameters
  author: lacquer-team

agents:
  creative_agent:
    provider: anthropic
    model: claude-3-5-sonnet-20241022
    temperature: 0.8
    max_tokens: 500
    top_p: 0.9
    system_prompt: |
      You are a creative writing assistant. You love to use vivid imagery, 
      metaphors, and engaging storytelling techniques. Always write in an 
      enthusiastic and imaginative style.

  analytical_agent:
    provider: openai
    model: gpt-4
    temperature: 0.1
    max_tokens: 1000
    top_p: 0.3
    system_prompt: |
      You are a precise analytical assistant. You provide factual, 
      well-structured responses with clear reasoning. Always be thorough 
      and methodical in your analysis.

  balanced_agent:
    provider: anthropic
    model: claude-3-5-sonnet-20241022
    temperature: 0.5
    max_tokens: 750
    system_prompt: |
      You are a balanced assistant that combines creativity with analytical thinking. 
      Provide responses that are both informative and engaging.

workflow:
  inputs:
    topic:
      type: string
      description: Topic to explore from different perspectives
      default: "artificial intelligence in education"
    
    analysis_depth:
      type: string
      description: Depth of analysis required
      default: "moderate"
      enum: ["surface", "moderate", "deep"]

  steps:
    - id: creative_perspective
      agent: creative_agent
      prompt: |
        Write a creative and engaging introduction to the topic: {{ inputs.topic }}
        
        Make it inspiring and use vivid language that captures the imagination.
        Focus on the possibilities and exciting potential.
      outputs:
        introduction:
          type: string
          description: Creative introduction to the topic
        tone:
          type: string
          description: The tone used in the response
        word_count:
          type: number
          description: Approximate word count

    - id: analytical_perspective
      agent: analytical_agent
      prompt: |
        Provide a detailed analytical breakdown of: {{ inputs.topic }}
        
        Analysis depth: {{ inputs.analysis_depth }}
        
        Structure your response with:
        1. Current state analysis
        2. Key challenges and opportunities
        3. Evidence-based conclusions
        4. Specific recommendations
        
        Be precise and factual in your assessment.
      outputs:
        analysis:
          type: string
          description: Analytical breakdown of the topic
        key_points:
          type: array
          description: Key analytical points
        recommendations:
          type: array
          description: Specific recommendations
        confidence_level:
          type: string
          description: Confidence level in the analysis

    - id: balanced_synthesis
      agent: balanced_agent
      prompt: |
        Based on these two perspectives on {{ inputs.topic }}:
        
        CREATIVE PERSPECTIVE:
        {{ steps.creative_perspective.outputs.introduction }}
        
        ANALYTICAL PERSPECTIVE:
        {{ steps.analytical_perspective.outputs.analysis }}
        
        Create a balanced synthesis that combines the inspiring vision with 
        practical insights. Make it both engaging and actionable.
      outputs:
        synthesis:
          type: string
          description: Balanced synthesis of both perspectives
        combined_insights:
          type: array
          description: Key insights from combining perspectives
        actionable_steps:
          type: array
          description: Practical steps that can be taken

    - id: compare_approaches
      run: |
        #!/bin/bash
        creative_length=$(echo "$1" | wc -w | tr -d ' ')
        analytical_length=$(echo "$2" | wc -w | tr -d ' ')
        synthesis_length=$(echo "$3" | wc -w | tr -d ' ')
        
        echo "{
          \"response_lengths\": {
            \"creative\": $creative_length,
            \"analytical\": $analytical_length,
            \"synthesis\": $synthesis_length
          },
          \"longest_response\": \"$(if [ $creative_length -gt $analytical_length ] && [ $creative_length -gt $synthesis_length ]; then echo 'creative'; elif [ $analytical_length -gt $synthesis_length ]; then echo 'analytical'; else echo 'synthesis'; fi)\",
          \"total_words\": $((creative_length + analytical_length + synthesis_length)),
          \"agent_comparison\": {
            \"creative_agent_characteristics\": \"High temperature (0.8), enthusiastic tone\",
            \"analytical_agent_characteristics\": \"Low temperature (0.1), precise structure\",
            \"balanced_agent_characteristics\": \"Medium temperature (0.5), combined approach\"
          }
        }"
      with:
        creative: "{{ steps.creative_perspective.outputs.introduction }}"
        analytical: "{{ steps.analytical_perspective.outputs.analysis }}"
        synthesis: "{{ steps.balanced_synthesis.outputs.synthesis }}"
      outputs:
        response_lengths:
          type: object
          description: Word counts for each response
        longest_response:
          type: string
          description: Which agent produced the longest response
        total_words:
          type: number
          description: Total words across all responses
        agent_comparison:
          type: object
          description: Comparison of agent characteristics

  outputs:
    # Individual agent outputs
    creative_output: "{{ steps.creative_perspective.outputs }}"
    analytical_output: "{{ steps.analytical_perspective.outputs }}"
    balanced_output: "{{ steps.balanced_synthesis.outputs }}"
    
    # Comparison metrics
    agent_performance: "{{ steps.compare_approaches.outputs }}"
    
    # Topic exploration summary
    topic_explored: "{{ inputs.topic }}"
    exploration_summary: "Explored {{ inputs.topic }} through three different agent configurations: creative (temp=0.8), analytical (temp=0.1), and balanced (temp=0.5)"
    
    # Agent configuration details
    agent_configs: {
      "creative": {
        "provider": "anthropic",
        "model": "claude-3-5-sonnet-20241022",
        "temperature": 0.8,
        "max_tokens": 500,
        "characteristics": "High creativity, vivid language"
      },
      "analytical": {
        "provider": "openai", 
        "model": "gpt-4",
        "temperature": 0.1,
        "max_tokens": 1000,
        "characteristics": "Precise, methodical, factual"
      },
      "balanced": {
        "provider": "anthropic",
        "model": "claude-3-5-sonnet-20241022", 
        "temperature": 0.5,
        "max_tokens": 750,
        "characteristics": "Balanced creativity and analysis"
      }
    }