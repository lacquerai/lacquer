version: "1.0"

metadata:
  name: "semantic-validation-test"
  description: "Test workflow for semantic validation"

agents:
  researcher:
    provider: "openai"
    model: "gpt-4"
    temperature: 0.7
    system_prompt: "You are a helpful research assistant."
  
  summarizer:
    provider: "anthropic"
    model: "claude-3-sonnet"
    max_tokens: 1000

workflow:
  inputs:
    topic:
      type: "string"
      description: "Research topic"
      required: true
    
  state:
    count: 0
    results: []
    
  steps:
    - id: "research"
      agent: "researcher"
      prompt: "Research the topic: {{ inputs.topic }}"
      outputs:
        findings: "{{ output }}"
        
    - id: "analyze"
      agent: "researcher"
      prompt: "Analyze these findings: {{ steps.research.output }}"
      condition: "{{ state.count }} < 5"
      
    - id: "summarize"
      agent: "summarizer"
      prompt: "Summarize: {{ steps.analyze.output }}"
        
    - id: "finalize"
      uses: "lacquer/file-writer@v1"
      with:
        content: "{{ steps.summarize.output }}"
        filename: "results.txt"
        
  outputs:
    summary: "{{ steps.summarize.output }}"