version: "1.0"

metadata:
  name: "simple-variable-test"

agents:
  processor:
    provider: "openai"
    model: "gpt-4"

workflow:
  inputs:
    topic:
      type: "string"
      required: true
    format:
      type: "string"
      default: "markdown"
      
  state:
    progress: 0
    
  steps:
    - id: basic_interpolation
      agent: processor
      prompt: "Process the topic: {{ inputs.topic }}"
      
    - id: format_step
      agent: processor
      prompt: "Format as: {{ inputs.format }}"
      
    - id: nested_variables
      agent: processor
      prompt: "Previous result: {{ steps.basic_interpolation.output }}"
      
    - id: environment_variables
      agent: processor
      prompt: "Working in environment: {{ env.NODE_ENV }}"
      
    - id: metadata_access
      agent: processor
      prompt: "Workflow name: {{ metadata.name }}"
        
  outputs:
    processed_topic: "{{ steps.basic_interpolation.output }}"
    final_progress: "{{ state.progress }}"