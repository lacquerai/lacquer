version: "1.0"

metadata:
  name: remote-mcp
  description: Example workflow using remote MCP servers for various tools
  author: Lacquer Team

agents:
  assistant:
    provider: anthropic
    model: claude-3-5-sonnet-20240620
    temperature: 0.2
    system_prompt: You are a helpful assistant that can access various tools through MCP servers.
    tools:
      - name: github_tools
        description: Tools for interacting with GitHub repositories via MCP
        mcp_server:
          type: remote
          url: "https://api.githubcopilot.com/mcp/"
          auth:
            type: oauth2
            client_id: "${GITHUB_CLIENT_ID}"
            client_secret: "${GITHUB_CLIENT_SECRET}"
            token_url: "https://api.github.com/oauth/token"
            scopes: "repo"
          timeout: 30s
      
workflow:
  inputs:
    organization:
      type: string
      description: Organization to list repositories from
      default: "lacquerai"

  steps:
    - id: list_repos
      agent: assistant
      prompt: |
        List the repositories in the organization: {{ inputs.organization }}

  outputs:
    summary: "{{ steps.list_repos.output }}"