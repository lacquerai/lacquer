version: "1.0"
name: text-analyzer
metadata:
  name: text-analyzer
  description: A simple text analyzer worklow
  author: lacquer-team

inputs:
  text:
    type: string
    description: The text to analyze
    required: true
  analysis_type:
    type: string
    description: Type of analysis to perform
    enum: ["sentiment", "summary", "keywords", "all"]
    default: "all"

workflow:
  agents:
    analyzer:
      provider: anthropic
      model: claude-3-5-sonnet-20241022
      temperature: 0.3
      system_prompt: "You are a text analysis expert."

  steps:
    - id: sentiment_analysis
      agent: analyzer
      prompt: |
        Analyze the sentiment of this text and provide a score from -1 (very negative) to 1 (very positive):
        
        Text: {{ inputs.text }}
        
        Return only a JSON object with: {"sentiment": score, "explanation": "brief explanation"}
      outputs:
        sentiment:
          type: number
        explanation:
          type: string

  outputs:
    sentiment: "{{ steps.sentiment_analysis.outputs.sentiment }}"