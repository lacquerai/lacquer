version: "1.0"
metadata:
  name: simple-block-test
  description: Simple workflow testing local block integration

agents:
  analyst:
    model: claude-3-sonnet
    temperature: 0.3

workflow:
  inputs:
    numbers:
      type: array
      items: number
      default: [10, 25, 30, 15, 40]

  steps:
    # Step 1: Use local block to calculate sum
    - id: calculate_sum
      uses: ./examples/blocks/data-transformer
      with:
        numbers: "{{ inputs.numbers }}"
        operation: "sum"
        precision: 2

    # Step 2: Use local block to calculate average  
    - id: calculate_average
      uses: ./examples/blocks/data-transformer
      with:
        numbers: "{{ inputs.numbers }}"
        operation: "average"
        precision: 2

    # Step 3: Use Claude to analyze the results
    - id: analyze_results
      agent: analyst
      prompt: |
        I calculated some statistics for the numbers {{ inputs.numbers }}:
        
        Sum: {{ steps.calculate_sum.outputs.result }}
        Average: {{ steps.calculate_average.outputs.result }}
        Count: {{ steps.calculate_sum.outputs.count }}
        
        Please provide a brief analysis of this data in 2-3 sentences.

  outputs:
    sum: "{{ steps.calculate_sum.outputs.result }}"
    average: "{{ steps.calculate_average.outputs.result }}"
    analysis: "{{ steps.analyze_results.outputs }}"